---
import BaseLayout from '../layouts/BaseLayout.astro';
import { useTranslations } from '../i18n/translation';
import VisualCarousel from '../components/features/carousel/VisualCarousel.astro';
import { fetchData } from "../utils/apiService";

const lang = Astro.cookies.get('lang')?.value || 'es';
const t = useTranslations(lang);

// Fetch the main config data. Astro.url.origin is needed for server-side fetch of local files.
const dataConfig = await fetchData('config');

// No more hardcoded resources. Use the ones from the config.
const carouselResources = dataConfig?.carouselResources || [];

---

<BaseLayout titleKey="site.title" lang={lang} config={dataConfig}>
  <div class="relative w-full min-h-screen">
    {/* Pass the resources from the config to the carousel */}
    <VisualCarousel resources={carouselResources} videoZoomScale={1.2} class="absolute inset-0" />
    <div class="absolute inset-0 flex items-center justify-center z-10 text-white text-center p-4">
      {/* Restoring the greeting text */}
    </div>
  </div>

  <div class="container mx-auto py-12 text-center">
    <h2 class="text-3xl font-bold mb-4">Bienvenido a nuestro hotel</h2>
    <p class="text-lg mb-8">
      Experimenta una estancia inolvidable con nosotros. Disfruta de nuestras lujosas habitaciones,
      exquisita gastronomía y las mejores excursiones.
    </p>
    <!-- Aquí puedes añadir más contenido para la página de inicio debajo del carrusel -->
  </div>
</BaseLayout>
