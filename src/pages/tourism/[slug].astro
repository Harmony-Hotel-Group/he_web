---
import { useI18n } from '@/i18n/useI18n';
import HotelLayout from '@/layouts/HotelLayout.astro';
import Button from '@/components/ui/Button.astro';

const { tourism } = await import('@/data/tourism.json');
const { t } = useI18n();

// Get tourism spot by slug from URL params
const { slug } = Astro.params;
const touristSpot = tourism.find(t => t.slug === slug);

if (!touristSpot) {
  return Astro.redirect('/404');
}

const title = touristSpot.name.es;
const description = touristSpot.shortDescription.es;
---

<HotelLayout {title} {description}>
  <!-- Tourism Hero Section -->
  <section class="relative h-96 bg-black">
    <img
      src={touristSpot.image.url}
      alt={touristSpot.image.alt.es}
      class="w-full h-full object-cover"
    />
    <div class="absolute inset-0 bg-black bg-opacity-40"></div>
    <div class="absolute bottom-8 left-8 text-white">
      <h1 class="text-4xl font-bold mb-2">{touristSpot.name.es}</h1>
      <p class="text-lg">{touristSpot.category}</p>
    </div>
  </section>

  <!-- Tourism Details -->
  <section class="py-16">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
          <!-- Main Content -->
          <div class="lg:col-span-2">
            <p class="text-lg text-gray-700 mb-6">
              {touristSpot.longDescription.es}
            </p>

            <!-- Tags -->
            <div class="mb-8">
              <h3 class="text-xl font-semibold mb-4">{t('tourism.tags')}</h3>
              <div class="flex flex-wrap gap-2">
                {touristSpot.tags.map(tag => (
                  <span
                    class="px-3 py-1 bg-hotel-primary text-white rounded-full text-sm"
                  >
                    {tag}
                  </span>
                ))}
              </div>
            </div>
          </div>

          <!-- Sidebar -->
          <div class="bg-gray-50 p-6 rounded-lg">
            <h3 class="text-xl font-semibold mb-4">{t('tourism.info')}</h3>

            <div class="space-y-4">
              <div class="flex items-center">
                <span class="text-2xl mr-3">üìç</span>
                <div>
                  <p class="font-semibold">{t('tourism.distance')}</p>
                  <p class="text-gray-600">{touristSpot.distance}</p>
                </div>
              </div>

              <div class="flex items-center">
                <span class="text-2xl mr-3">‚è±Ô∏è</span>
                <div>
                  <p class="font-semibold">{t('tourism.duration')}</p>
                  <p class="text-gray-600">{touristSpot.duration}</p>
                </div>
              </div>
            </div>

            <Button variant="primary" size="lg" class="w-full mt-6">
              {t('tourism.bookTour')}
            </Button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Related Tourism -->
  <section class="py-16 bg-gray-50">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold text-center mb-12">
        {t('tourism.related')}
      </h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        {tourism.filter(t => t.id !== touristSpot.id).slice(0, 2).map(relatedSpot => (
          <div class="bg-white rounded-lg shadow-md overflow-hidden">
            <img
              src={relatedSpot.image.url}
              alt={relatedSpot.image.alt.es}
              class="w-full h-48 object-cover"
            />
            <div class="p-4">
              <h3 class="font-bold mb-2">{relatedSpot.name.es}</h3>
              <p class="text-gray-600 mb-4">
                {relatedSpot.shortDescription.es}
              </p>
              <Button variant="outline" size="sm">
                <a href={`/tourism/${relatedSpot.slug}`}>
                  {t('common.view')}
                </a>
              </Button>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>
</HotelLayout>