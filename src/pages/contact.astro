---
import { useI18n } from '@/i18n/useI18n';
import BaseLayout from '@/layouts/BaseLayout.astro';
import Button from '@/components/ui/Button.astro';
import Card from '@/components/ui/Card.astro';

const { hotel } = await import('@/data/hotel.json');
const { siteConfig } = await import('@/data/siteConfig.json');
const { t } = useI18n();

const title = t('contact.title');
const description = t('contact.description');
---

<BaseLayout {title} {description}>
  <!-- Page Header -->
  <section class="bg-gray-50 py-16">
    <div class="container mx-auto px-4 text-center">
      <h1 class="text-4xl md:text-5xl font-bold mb-4">
        {t('contact.title')}
      </h1>
      <p class="text-lg text-gray-700 max-w-2xl mx-auto">
        {t('contact.subtitle')}
      </p>
    </div>
  </section>

  <!-- Contact Content -->
  <section class="py-16">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
        <!-- Contact Form -->
        <Card variant="elevated" class="p-8">
          <h2 class="text-2xl font-bold mb-6">{t('contact.form')}</h2>

          <form class="space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label for="firstName" class="block text-sm font-medium mb-2">
                  {t('contact.firstName')}
                </label>
                <input
                  type="text"
                  id="firstName"
                  name="firstName"
                  required
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-hotel-primary"
                />
              </div>

              <div>
                <label for="lastName" class="block text-sm font-medium mb-2">
                  {t('contact.lastName')}
                </label>
                <input
                  type="text"
                  id="lastName"
                  name="lastName"
                  required
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-hotel-primary"
                />
              </div>
            </div>

            <div>
              <label for="email" class="block text-sm font-medium mb-2">
                {t('contact.email')}
              </label>
              <input
                type="email"
                id="email"
                name="email"
                required
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-hotel-primary"
              />
            </div>

            <div>
              <label for="phone" class="block text-sm font-medium mb-2">
                {t('contact.phone')}
              </label>
              <input
                type="tel"
                id="phone"
                name="phone"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-hotel-primary"
              />
            </div>

            <div>
              <label for="subject" class="block text-sm font-medium mb-2">
                {t('contact.subject')}
              </label>
              <select
                id="subject"
                name="subject"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-hotel-primary"
              >
                <option value="general">{t('contact.general')}</option>
                <option value="reservations">{t('contact.reservations')}</option>
                <option value="events">{t('contact.events')}</option>
                <option value="complaints">{t('contact.complaints')}</option>
              </select>
            </div>

            <div>
              <label for="message" class="block text-sm font-medium mb-2">
                {t('contact.message')}
              </label>
              <textarea
                id="message"
                name="message"
                rows="5"
                required
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-hotel-primary"
                placeholder={t('contact.messagePlaceholder')}
              ></textarea>
            </div>

            <Button type="submit" variant="primary" size="lg" class="w-full">
              {t('contact.send')}
            </Button>
          </form>
        </Card>

        <!-- Contact Information -->
        <div class="space-y-8">
          <!-- Hotel Info -->
          <Card variant="elevated" class="p-6">
            <h3 class="text-xl font-bold mb-4">{t('contact.info')}</h3>

            <div class="space-y-4">
              <div class="flex items-start">
                <span class="text-2xl mr-3">üìç</span>
                <div>
                  <p class="font-semibold">{t('contact.address')}</p>
                  <p class="text-gray-600">
                    {hotel.location?.address || 'Centro Hist√≥rico, Cuenca, Ecuador'}
                  </p>
                </div>
              </div>

              <div class="flex items-center">
                <span class="text-2xl mr-3">üìû</span>
                <div>
                  <p class="font-semibold">{t('contact.phone')}</p>
                  <p class="text-gray-600">
                    {hotel.contact?.phone || '+593999999999'}
                  </p>
                </div>
              </div>

              <div class="flex items-center">
                <span class="text-2xl mr-3">‚úâÔ∏è</span>
                <div>
                  <p class="font-semibold">{t('contact.email')}</p>
                  <p class="text-gray-600">
                    {hotel.contact?.email || 'info@hotelensuenos.com'}
                  </p>
                </div>
              </div>

              <div class="flex items-center">
                <span class="text-2xl mr-3">üí¨</span>
                <div>
                  <p class="font-semibold">{t('contact.whatsapp')}</p>
                  <p class="text-gray-600">
                    {siteConfig.whatsappContact || '+593999999999'}
                  </p>
                </div>
              </div>
            </div>
          </Card>

          <!-- Hours -->
          <Card variant="elevated" class="p-6">
            <h3 class="text-xl font-bold mb-4">{t('contact.hours')}</h3>

            <div class="space-y-2">
              <div class="flex justify-between">
                <span>{t('contact.checkIn')}:</span>
                <span class="font-semibold">{hotel.checkInTime || '15:00'}</span>
              </div>
              <div class="flex justify-between">
                <span>{t('contact.checkOut')}:</span>
                <span class="font-semibold">{hotel.checkOutTime || '12:00'}</span>
              </div>
            </div>
          </Card>

          <!-- Quick Contact Buttons -->
          <div class="space-y-3">
            <Button variant="outline" size="lg" class="w-full">
              <a href={`tel:${hotel.contact?.phone || '+593999999999'}`} class="flex items-center">
                üìû {t('contact.callNow')}
              </a>
            </Button>

            <Button variant="outline" size="lg" class="w-full">
              <a href={`https://wa.me/${(siteConfig.whatsappContact || '+593999999999').replace('+', '')}`} class="flex items-center">
                üí¨ {t('contact.whatsapp')}
              </a>
            </Button>

            <Button variant="outline" size="lg" class="w-full">
              <a href={`mailto:${hotel.contact?.email || 'info@hotelensuenos.com'}`} class="flex items-center">
                ‚úâÔ∏è {t('contact.email')}
              </a>
            </Button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Map Section (Placeholder) -->
  <section class="py-16 bg-gray-50">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-3xl font-bold text-center mb-8">
          {t('contact.location')}
        </h2>

        <Card variant="elevated" class="p-8 text-center">
          <div class="bg-gray-200 h-64 rounded-lg flex items-center justify-center">
            <div class="text-center">
              <div class="text-4xl mb-2">üó∫Ô∏è</div>
              <p class="text-gray-600 mb-4">
                {t('contact.mapPlaceholder')}
              </p>
              <Button variant="primary">
                <a href={`https://maps.google.com/maps?q=${hotel.location?.coordinates?.lat || -2.9006},${hotel.location?.coordinates?.lng || -79.0045}`} target="_blank">
                  {t('contact.openMap')}
                </a>
              </Button>
            </div>
          </div>
        </Card>
      </div>
    </div>
  </section>
</BaseLayout>