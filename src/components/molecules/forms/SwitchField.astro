---
// src/components/molecules/forms/SwitchField.astro
import Switch from '../../atoms/Switch.astro'; // Changed from .astro to .jsx
import Label from '../../atoms/Label.astro'; // Import Label.jsx

interface Props {
  label: string; // This is the translation key
  name: string;
  id?: string;
  checked?: boolean;
  className?: string;
  t: (key: string) => string; // Added t prop
  onChange?: (value: string) => void; // Add onChange prop
}

const { label, name, id = name, checked, className, t, onChange } = Astro.props;

const switchId = `switch-${id}`;
---

<div class:list={["flex items-center justify-between p-3 bg-white rounded-lg shadow-md", className]}>
  {/* Label for the switch */}
  <Label for={switchId} textKey={label} t={t} client:load />
  
  {/* The Switch component */}
  <Switch 
    id={switchId} 
    name={name} 
    checked={checked} 
    srLabel={t(label)} // Use translated label for screen readers
    client:load // Add client:load for the Preact component
    onChange={onChange}
  />
</div>
