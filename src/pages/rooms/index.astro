---
// src/pages/rooms.astro
import BaseLayout from '../../../layouts/BaseLayout.js';
import { Translations } from '../../i18n/translation.ts';
import { fetchData } from '../../utils/apiService.js';
import VisualResource from '../../components/ui/VisualResource.js';

const lang = Astro.cookies.get('lang')?.value || 'es';
const t = Translations(lang);

const rooms = await fetchData('rooms');
---

<BaseLayout titleKey="nav.rooms" lang={lang}>
  <div class="bg-gray-50 dark:bg-gray-900">
    <div class="container mx-auto py-24 px-4">
      <h1 class="text-4xl font-bold mb-2 text-center text-gray-800 dark:text-white">{t('pages.rooms.title')}</h1>
      <p class="text-lg text-gray-600 dark:text-gray-300 text-center mb-12">{t('pages.rooms.subtitle')}</p>
      
      {rooms && rooms.length > 0 ? (
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {rooms.map(room => (
            <a href={`/rooms/${room.id}`} class="group block bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-transform transform hover:-translate-y-2 hover:shadow-2xl">
              <div class="relative h-56 w-full overflow-hidden">
                <VisualResource src={room.images?.[0]?.src} alt={room.images?.[0]?.alt[lang] || room.type[lang]} type="image" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"/>
              </div>
              <div class="p-6">
                <h2 class="text-2xl font-semibold mb-2 text-gray-900 dark:text-white">{room.type[lang]}</h2>
                <p class="text-gray-600 dark:text-gray-400 mb-4 line-clamp-3">{room.summary[lang]}</p>
                <span class="text-indigo-600 dark:text-indigo-400 font-bold group-hover:underline">{t('actions.seeDetails')} â†’</span>
              </div>
            </a>
          ))}
        </div>
      ) : (
        <p class="text-center text-gray-500">{t('errors.noData')}</p>
      )}
    </div>
  </div>
</BaseLayout>